{% extends 'layout.html' %}

{% block title %}Solicitação de Teste de Calazar - VISA Digital{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Solicitação para Teste de Calazar (Leishmaniose)</h2>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left me-2"></i>Voltar para a Página Inicial
        </a>
    </div>

    <form action="{{ url_for('solicitar_teste_calazar') }}" method="post" enctype="multipart/form-data">
        <fieldset class="border p-3 mb-4 rounded">
            <legend class="w-auto px-2 h6">1. Dados do Proprietário</legend>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="proprietario_nome" class="form-label">Nome Completo</label>
                    <input type="text" class="form-control" id="proprietario_nome" name="proprietario_nome" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="proprietario_cpf" class="form-label">CPF</label>
                    <input type="text" class="form-control" id="proprietario_cpf" name="proprietario_cpf" placeholder="Ex: 123.456.789-00">
                </div>
            </div>
            <div class="mb-3">
                <label for="proprietario_endereco" class="form-label">Endereço Completo</label>
                <input type="text" class="form-control" id="proprietario_endereco" name="proprietario_endereco" required placeholder="Rua, número, bairro, cidade/estado">
            </div>
            <div class="mb-3">
                <label for="proprietario_telefone" class="form-label">Telefone</label>
                <input type="text" class="form-control" id="proprietario_telefone" name="proprietario_telefone" required placeholder="Ex: (DD) 99999-9999">
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4 rounded">
            <legend class="w-auto px-2 h6">2. Dados do Animal</legend>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="animal_nome" class="form-label">Nome do Animal</label>
                    <input type="text" class="form-control" id="animal_nome" name="animal_nome" required>
                </div>
                <!-- :: INÍCIO DA ALTERAÇÃO :: Campo 'Espécie' alterado para select -->
                <div class="col-md-4 mb-3">
                    <label for="animal_especie" class="form-label">Espécie</label>
                    <select class="form-select" id="animal_especie" name="animal_especie" required>
                        <option value="Cão" selected>Cão</option>
                        <option value="Gato">Gato</option>
                    </select>
                </div>
                <!-- :: FIM DA ALTERAÇÃO :: -->
                <div class="col-md-4 mb-3">
                    <label for="animal_raca" class="form-label">Raça</label>
                    <input type="text" class="form-control" id="animal_raca" name="animal_raca" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="animal_sexo" class="form-label">Sexo</label>
                    <select class="form-select" id="animal_sexo" name="animal_sexo">
                        <option value="Macho">Macho</option>
                        <option value="Fêmea">Fêmea</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="animal_idade" class="form-label">Idade</label>
                    <input type="text" class="form-control" id="animal_idade" name="animal_idade" placeholder="Ex: 3 anos e 6 meses">
                </div>
                <div class="col-md-4 mb-3">
                    <label for="animal_cor" class="form-label">Cor da Pelagem</label>
                    <input type="text" class="form-control" id="animal_cor" name="animal_cor">
                </div>
            </div>
            
            <!-- :: INÍCIO DA ALTERAÇÃO :: Seção de fotos com 3 campos -->
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="foto_focinho" class="form-label">Foto do Focinho (opcional)</label>
                    <input type="file" class="form-control" id="foto_focinho" name="foto_focinho" accept="image/*">
                </div>
                <div class="col-md-4 mb-3">
                    <label for="foto_patas" class="form-label">Foto das Patas (opcional)</label>
                    <input type="file" class="form-control" id="foto_patas" name="foto_patas" accept="image/*">
                </div>
                <div class="col-md-4 mb-3">
                    <label for="foto_corpo_inteiro" class="form-label">Foto do Corpo Inteiro (opcional)</label>
                    <input type="file" class="form-control" id="foto_corpo_inteiro" name="foto_corpo_inteiro" accept="image/*">
                </div>
            </div>
            <!-- :: FIM DA ALTERAÇÃO :: -->
        </fieldset>

        <fieldset class="border p-3 mb-4 rounded">
            <legend class="w-auto px-2 h6">3. Informações Clínicas e Coleta</legend>
            <div class="mb-3">
                <label for="sinais_clinicos" class="form-label">Sinais Clínicos Apresentados</label>
                <textarea class="form-control" id="sinais_clinicos" name="sinais_clinicos" rows="4" placeholder="Descreva os sintomas do animal..."></textarea>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="data_coleta" class="form-label">Data Sugerida para Coleta</label>
                    <input type="date" class="form-control" id="data_coleta" name="data_coleta" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="horario_coleta" class="form-label">Horário Sugerido</label>
                    <input type="time" class="form-control" id="horario_coleta" name="horario_coleta">
                </div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4 rounded">
            <legend class="w-auto px-2 h6">4. Declaração e Autorização</legend>
            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="declaracao_autorizacao" name="declaracao_autorizacao" required>
                <label class="form-check-label" for="declaracao_autorizacao">
                    Declaro que as informações prestadas são verdadeiras e autorizo a visita da equipe da Vigilância em Saúde para avaliação e coleta de material biológico, se necessário.
                </label>
            </div>
        </fieldset>
        
        <button type="submit" class="btn btn-success btn-lg">Enviar Solicitação de Teste</button>
    </form>
</div>
{% endblock %}
